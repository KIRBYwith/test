<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë„ì„œ ì˜ˆì•½ - KIRBY ë„ì„œê´€</title>
    <link rel="stylesheet" href="/css/style.css">
    <style>
        .container { max-width: 720px; margin: 2rem auto; background: rgba(255,255,255,0.9); padding: 2rem; border-radius: 16px; }
        .actions { margin-top: 1rem; }
        .btn { padding: 0.6rem 1.2rem; border: 0; border-radius: 8px; background: #ff69b4; color: #fff; cursor: pointer; font-weight: 700; }
        .btn-outline { background: #fff; color: #d63384; border: 2px solid #ffb3d9; }
    </style>
</head>
<body>
<header>
    <h1>ğŸ“–KIRBY ë„ì„œê´€ğŸ“–</h1>
    <nav>
        <a href="index.html">í™ˆ</a>
        <a href="books.html">ë„ì„œëª©ë¡</a>
    </nav>
    <script src="/js/state.js"></script>
</header>

<div class="container">
    <h2>ë„ì„œ ì˜ˆì•½</h2>
    <p id="bookInfo">ë„ì„œ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘â€¦</p>
    <div class="actions">
        <button id="reserveBtn" class="btn">ì˜ˆì•½ ì‹ ì²­</button>
        <a href="books.html" class="btn btn-outline">ëª©ë¡ìœ¼ë¡œ</a>
    </div>
</div>

<script>
    const params = new URLSearchParams(location.search);
    const bookId = parseInt(params.get('bookId'));
    const BOOKS = {
        1: { title:"ë‹¬ì½¤í•œ ë‚˜ì˜ ë„ì‹œ", author:"ì •ì´í˜„" },
        2: { title:"1ë¦¬í„°ì˜ ëˆˆë¬¼", author:"í‚¤í† ì•„ì•¼" },
        3: { title:"ì²­ì†Œë¶€ ë°¥", author:"í™‰í‚¨ìŠ¤, í† ë“œ" },
        4: { title:"ë§ˆì‹œë©œë¡œ ì´ì•¼ê¸°", author:"í¬ì‚¬ë‹¤, í˜¸ì•„í‚´ ë°" },
        6: { title:"í€´ì¦ˆ ì‡¼", author:"ê¹€ì˜í•˜" },
        20: { title:"ì¬ë¯¸ìˆëŠ” ì˜ì–‘ì´ì•¼ê¸°", author:"ê¹€í˜„ìˆ™" },
        30: { title:"ì¼ë³¸. 1 : ë– ë‚˜ê¸° ì „ì—", author:"ì‹¬ì²­ë³´" },
    };

    const infoEl = document.getElementById('bookInfo');
    const user = JSON.parse(localStorage.getItem('user') || 'null');
    if (!bookId || !BOOKS[bookId]) {
        infoEl.textContent = 'ì˜ëª»ëœ ì ‘ê·¼ì…ë‹ˆë‹¤.';
        document.getElementById('reserveBtn').disabled = true;
    } else {
        const b = BOOKS[bookId];
        infoEl.textContent = `${b.title} â€” ${b.author}`;
    }

    document.getElementById('reserveBtn').addEventListener('click', () => {
        if (!localStorage.getItem('isLoggedIn')) { alert('ë¡œê·¸ì¸ í›„ ì´ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.'); return; }
        if (window.State) {
            State.addReservation(bookId, user.email);
            const u = JSON.parse(localStorage.getItem('user'));
            u.reservations = Array.from(new Set([...(u.reservations||[]), bookId]));
            localStorage.setItem('user', JSON.stringify(u));
        }
        alert('ì˜ˆì•½ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤.');
        window.location.href = 'books.html';
    });
</script>
</body>
</html>


